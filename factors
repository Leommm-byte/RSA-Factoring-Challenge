#!/usr/bin/python3
import sys
import math

def get_primes(n):
    """Return a list of prime numbers up to n."""
    primes = []
    is_prime = [True] * (n + 1)
    is_prime[0] = is_prime[1] = False
    for i in range(2, int(math.sqrt(n)) + 1):
        if is_prime[i]:
            primes.append(i)
            for j in range(i * i, n + 1, i):
                is_prime[j] = False
    for i in range(int(math.sqrt(n)) + 1, n + 1):
        if is_prime[i]:
            primes.append(i)
    return primes

def factorize(num, primes):
    """Factorize a number and print the result."""
    for p in primes:
        if num % p == 0:
            print(f"{num}={num//p}*{p}")
            return
    print(f"{num}=1*{num}")

if __name__ == "__main__":
    if len(sys.argv) < 2:
        print("Please provide a filename as an argument")
        sys.exit(1)

    filepath = sys.argv[1]
    primes = get_primes(int(math.sqrt(1000000000)))
    with open(filepath, "r") as file_info:
        for line in file_info:
            num = int(line.strip())
            factorize(num, primes)
